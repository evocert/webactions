!function(name,context,definition){typeof exports=='object'?module.exports=definition(require):typeof define=='function'&&define.amd?define(definition):context[name]=definition()}.call(this,'parseActivePassive',this,function(require){function parseActivePassive(prsng,unparsedcontent){var trimcode,passive,unsprsdln,psvprsdi,atvprsdi,canprintout,owner,print,altFlushPassive,altFlushPassiveResult,altFlushActive,altFlushActiveResult,altEvalActive,stillvalid,foundCode,hasCode,tmppassive,tmpcode,code,prvc,begi,endi,content;function callprsng(){return typeof prsng=="function"?prsng():prsng}typeof callprsng().startParsing=="function"&&callprsng().startParsing(),trimcode=!(typeof callprsng().trimactive=="boolean")||callprsng().trimactive,passive="",unsprsdln=-1,psvprsdi=-1,atvprsdi=-1,canprintout=typeof callprsng().print=="function",owner=typeof callprsng().owner=="object"?callprsng().owner:null,print=function(prntthis){canprintout&&typeof prntthis=="string"&&prntthis!==""&&(passive+=prntthis)},altFlushPassive=typeof callprsng().flushpassive=="function"?callprsng().flushpassive:null,altFlushPassiveResult=null,altFlushActive=typeof callprsng().flushactive=="function"?callprsng().flushactive:null,altFlushActiveResult=null,altEvalActive=typeof callprsng().evalactive=="function"?callprsng().evalactive:null,stillvalid=!0;function iterateString(prsgn,stringtoiterate,functoprsr){var i,tmpstringtoiterate;if(stillvalid&&stringtoiterate!=null)if(typeof stringtoiterate=="string"&&typeof functoprsr=="function"){for(i=0;i<stringtoiterate.length;i++)if(unsprsdln++,functoprsr(prsgn,stringtoiterate[i]),!stillvalid)break}else if(typeof stringtoiterate=="function")for(tmpstringtoiterate=null;stillvalid;)if((tmpstringtoiterate=stringtoiterate())!=null&&typeof tmpstringtoiterate=="string"){for(i=0;i<tmpstringtoiterate.length;i++)if(unsprsdln++,functoprsr(prsgn,tmpstringtoiterate[i]),!stillvalid)break}else break}foundCode=!1,hasCode=!1,tmppassive="",tmpcode="",code="",prvc="",begi=0,endi=0,content=[],typeof callprsng().beglbl!="string"&&typeof callprsng().beglbl!="function"&&(callprsng().beglbl="[@"),typeof callprsng().endlbl!="string"&&typeof callprsng().endlbl!="function"&&(callprsng().endlbl="@]");function flushPassive(prsng){if(tmppassive!=""){if(altFlushPassive!=null&&typeof altFlushPassive=="function")(altFlushPassiveResult=altFlushPassive(tmppassive,psvprsdi))!=null&&typeof altFlushPassiveResult=="boolean"&&altFlushPassiveResult===!1&&(stillvalid=!1);else if(foundCode)if(tmppassive.length>1&&tmppassive.startsWith("`")&&tmppassive.endsWith("`"))tmpcode+="print("+tmppassive+");";else{var cntntl=content.push(tmppassive+"");tmpcode+="print(content["+(cntntl-1)+"]);"}else print(tmppassive);psvprsdi>-1&&(psvprsdi=-1),tmppassive=""}}function parsePsvChar(prsng,chr){flushCode(prsng),tmppassive+=chr}function parseCodeChar(prsng,chr){hasCode||(trimcode&&(chr+"").trim()!==""?hasCode=!0:hasCode=!0),hasCode&&(flushPassive(prsng),foundCode||(foundCode=!0),tmpcode+=chr)}function flushCode(prsgn){tmpcode!=""&&(altFlushActive!=null&&typeof altFlushActive=="function"?(altFlushActiveResult=altFlushActive(tmpcode,atvprsdi))!=null&&typeof altFlushActiveResult=="boolean"&&altFlushActiveResult===!1&&(stillvalid=!1):code+=tmpcode,atvprsdi>-1&&(atvprsdi=-1),tmpcode="")}function beglbl(prsng){return typeof prsng.beglbl=="function"?prsng.beglbl():prsng.beglbl}function endlbl(prsng){return typeof prsng.endlbl=="function"?prsng.endlbl():prsng.endlbl}function parsechr(prsng,chr){var bi;endi==0&&begi<beglbl(prsng).length?(psvprsdi==-1&&(psvprsdi=unsprsdln),begi>0&&beglbl(prsng)[begi-1]==prvc&&beglbl(prsng)[begi]!==chr&&(bi=begi,begi=0,iterateString(prsng,beglbl(prsng).substring(0,bi),parsePsvChar)),beglbl(prsng)[begi]===chr?(begi++,begi===beglbl(prsng).length?(prvc="",prvc=""):prvc=chr):(begi>0&&(bi=begi,begi=0,iterateString(prsng,beglbl(prsng).substring(0,bi),parsePsvChar)),parsePsvChar(prsng,prvc=chr))):begi==beglbl(prsng).length&&endi<endlbl(prsng).length&&(atvprsdi==-1&&(atvprsdi=unsprsdln),endlbl(prsng)[endi]===chr?(endi++,endi===endlbl(prsng).length&&(begi=0,endi=0,prvc="")):(endi>0&&(bi=endi,endi=0,iterateString(prsng,endlbl(prsng).substring(0,bi),parseCodeChar)),parseCodeChar(prsng,chr)))}iterateString(callprsng(),unparsedcontent,parsechr),flushPassive(callprsng()),flushCode(callprsng()),foundCode&&code!=""&&(altEvalActive!=null&&typeof altEvalActive=="function"?altEvalActive(code):eval(code)),passive!==""&&canprintout&&callprsng().print(passive),typeof callprsng().endParsing=="function"&&callprsng().endParsing()}return parseActivePassive})