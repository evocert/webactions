//parsing
!function(name,context,definition){typeof exports=='object'?module.exports=definition(require):typeof define=='function'&&define.amd?define(definition):context[name]=definition()}.call(this,'parseActivePassive',this,function(require){var $=typeof require=='function'?require('./jquery'):window.$;function parseActivePassive(prsng,unparsedcontent){var passive,canprintout,owner,print,foundCode,hasCode,tmppassive,tmpcode,code,prvc,begi,endi,content;typeof prsng.startParsing=="function"&&prsng.startParsing(),passive="",canprintout=typeof prsng.print=="function",owner=typeof prsng.owner=="object"?prsng.owner:null,print=function(prntthis){canprintout&&typeof prntthis=="string"&&prntthis!==""&&(passive+=prntthis)};function iterateString(prsgn,stringtoiterate,functoprsr){if(typeof stringtoiterate=="string"&&typeof functoprsr=="function")for(let cdr of stringtoiterate)functoprsr(prsgn,cdr)}foundCode=!1,hasCode=!1,tmppassive="",tmpcode="",code="",prvc="",begi=0,endi=0,content=[],typeof prsng.beglbl!="string"&&(prsng.beglbl="[@"),typeof prsng.endlbl!="string"&&(prsng.endlbl="@]");function flushPassive(prsng){if(tmppassive!=""){if(foundCode)if(tmppassive.length>1&&tmppassive.startsWith("`")&&tmppassive.endsWith("`"))tmpcode+="print("+tmppassive+");";else{var cntntl=content.push(tmppassive+"");tmpcode+="print(content["+(cntntl-1)+"]);"}else print(tmppassive);tmppassive=""}}function parsePsvChar(prsng,chr){flushCode(),tmppassive+=chr}function parseCodeChar(prsng,chr){hasCode||(chr+"").trim()!==""&&(hasCode=!0),hasCode&&(flushPassive(prsng),foundCode||(foundCode=!0),tmpcode+=chr)}function flushCode(){tmpcode!=""&&(code+=tmpcode,tmpcode="")}function parsechr(prsng,chr){var bi;endi==0&&begi<prsng.beglbl.length?(begi>0&&prsng.beglbl[begi-1]==prvc&&prsng.beglbl[begi]!==chr&&(bi=begi,begi=0,iterateString(prsng,prsng.beglbl.substring(0,bi),parsePsvChar)),prsng.beglbl[begi]===chr?(begi++,begi===prsng.beglbl.length?(prvc="",prvc=""):prvc=chr):(begi>0&&(bi=begi,begi=0,iterateString(prsng,prsng.beglbl.substring(0,bi),parsePsvChar)),parsePsvChar(prsng,prvc=chr))):begi==prsng.beglbl.length&&endi<prsng.endlbl.length&&(prsng.endlbl[endi]===chr?(endi++,endi===prsng.endlbl.length&&(begi=0,endi=0,prvc="")):(endi>0&&(bi=endi,endi=0,iterateString(prsng,prsng.endlbl.substring(0,bi),parseCodeChar)),parseCodeChar(prsng,chr)))}iterateString(prsng,unparsedcontent,parsechr),flushPassive(prsng),flushCode(),foundCode&&code!=""&&eval(code),passive!==""&&canprintout&&prsng.print(passive),typeof prsng.endParsing=="function"&&prsng.endParsing()}return parseActivePassive})
//webactions
!function(b,c,a){typeof exports=='object'?module.exports=a(require):typeof define=='function'&&define.amd?define(a):c[b]=a()}.call(this,'webaction',this,function(c){var a=typeof c=='function'?c('./jquery'):window.$,d="",f;function g(){var c=[].slice.call(arguments),e,d;if(c==void 0)return;if(Array.isArray(c)){if(c.length==0)return;if(c.length==1)c=c[0];else{for(e in c)g(c[e]);return}}d={},a(c).each(function(){a.each(this.attributes,function(){this.specified&&(this.name=="url_ref"||this.name=="form_ref"||this.name=="enable_progress_elem"||this.name=="progress_elem"||this.name=="target"||this.name=="command"||this.name=="scriptlabel"||this.name=="replacelabel"||this.name==="parseoptions"?d[this.name]=this.value:this.name=="json_ref"&&this.value!=void 0&&this.value!=""&&(d[this.name]=JSON.parse(this.value)))})}),b(d)}function b(){var c=[].slice.call(arguments),s,u,q,n,f,l,o,g,p,r,t,x,e,m,y,v,w,z;if(c==void 0)return;if(Array.isArray(c)){if(c.length==0)return;if(c.length==1){if(Array.isArray(c[0])){for(s in c[0])b(c[0][s]);return}if(typeof c[0]=='function'){if(u=c[0](),u===void 0)return;b(u);return}c=c[0]}else{for(s in c)b(c[s]);return}}if(c.url_ref==void 0||c.url_ref=="")return;q=!1,n=!1,c.enable_progress_elem!=void 0&&c.enable_progress_elem!=""&&(n=c.enable_progress_elem=="true"),f="",l=!1,o="",g="",p="",r="",c.command!=void 0&&c.command!=""&&(r=c.command),c.form_ref!=void 0&&c.form_ref!=""&&(q=!0,p=c.form_ref),t=null,c.json_ref!=void 0&&(l=!0,t=c.json_ref),x="",n&&(c.progress_elem!=void 0?f=c.progress_elem+"":(a.blockUI({message:'<span style="font-size:1.2em" id="showprogress">Please wait ...</span>',css:{border:'none',padding:'15px',backgroundColor:'#000','-webkit-border-radius':'10px','-moz-border-radius':'10px',opacity:.7,color:'#fff'}}),f="#showprogress"),f!=void 0&&f!="#showprogress"&&a(f).show()),c.error_elem!=void 0?o=(c.error_elem+"").trim():o="",c.url_ref!=void 0?g=(c.url_ref+"").trim():g=(d+"").trim(),q&&c.form_ref!=void 0&&(p=(c.form_ref+"").trim()),c.target!=void 0&&(x=(c.target+"").trim()),e=l?t:new FormData,g!==""&&(m=j(g),g.indexOf("?")>-1?(g=g.slice(0,g.indexOf("?")),d=g+""):d=g+"",m!=void 0&&Object.keys(m).forEach(function(a){Array.isArray(m[a])?m[a].forEach(function(b){l?(e["reqst-params"][fname]==void 0&&(e["reqst-params"][fname]=[]),e["reqst-params"][a].push(b)):e.append(a,b)}):l?(e["reqst-params"][fname]==void 0&&(e["reqst-params"][fname]=[]),e["reqst-params"][a].push(m[a])):e.append(a,m[a])})),y=p.trim()==""?[]:p.split("|"),q&&y.forEach(function(b,c,d){a(b).length&&(a(b).is("form")||a(b).find("select[name],input[name],textarea[name]")!=void 0&&a(b).find("select[name],input[name],textarea[name]").each(function(){var b=a(this),g,d,c,f;b.attr("name")!=""&&(g=!0,d=b.attr("type")!==void 0?b.attr("type"):"text",(d==="checkbox"||d==="radio")&&(g=!!b.prop("checked")),g&&(c=b.attr("name"),f=b.val(),l&&e["reqst-params"]==void 0&&(e["reqst-params"]={}),d!==void 0&&d!=="button"&&d!=="submit"&&d!=="image"?d==="file"?l||e.append(b.attr("name"),b[0].files[0]):l?(e["reqst-params"][c]==void 0&&(e["reqst-params"][c]=[]),e["reqst-params"][c].push(f)):e.append(c,f):l?(e["reqst-params"][c]==void 0&&(e["reqst-params"][c]=[]),e["reqst-params"][c].push(f)):e.append(c,f)))}))}),r!=""&&(hasJSon||e.append("command",r)),v=k,w=h,z=new Promise(function(d,b){a.ajax({xhr:function(){var b=a.ajaxSettings.xhr();return b.upload.onprogress=function(b){n&&f!=void 0&&f!=""&&a(f).html(Math.floor(b.loaded/b.total*100)+'%')},b.withCredentials=!1,b},contentType:!!l&&"application/json",processData:!1,type:'POST',data:l?JSON.stringify(e):e,url:g,success:function(m,l,h){var j,k,e,g;if(h.getResponseHeader("Content-Disposition")==null){if(n&&f!=void 0&&(f=="#showprogress"?a.unblockUI():a(f).hide()),j="replace-content",c.replacelabel!=void 0&&(c.replacelabel!="").trim()!==""&&(j=(c.replacelabel!="").trim()),k="script",c.scriptlabel!=void 0&&c.scriptlabel!=""!==""&&(k=c.scriptlabel!=""),v!=null){c.replacelabel==void 0&&(c.replacelabel=j),c.scriptlabel==void 0&&(c.scriptlabel=k);try{v("ajax",c,m,l,h),d()}catch(a){b(a)}}}else e=(""+h.getResponseHeader("Content-Disposition")).trim(),e.indexOf("attachment;")>-1&&(e=e.substr(e.indexOf("attachment;")+"attachment;".length).trim()),g=(""+h.getResponseHeader("Content-Type")).trim(),g.indexOf(";")>-1&&(g=g.substr(0,g.indexOf(";")).trim()),e.indexOf("filename=")>-1&&(e=e.substr(e.indexOf("filename=")+"filename=".length).trim(),e=e.replace(/"/i,""),e=e.replace(/"/i,"")),i(responseText,e,g)},error:function(e,d,g){n&&f!=void 0&&(f=="#showprogress"?a.unblockUI():a(f).hide()),w!==void 0?w("ajax",c,d,e):o!=void 0&&o!=""&&a(o).html("Error loading request: "+d),b(Error("Error loading request: "+d))}})}),z.then(function(){c.resolved!=void 0&&typeof c.resolved=='function'&&c.resolved(c),c.options!=void 0&&b(c.options)},function(a){c.rejected!=void 0&&typeof c.rejected=='function'&&c.rejected(c,a)})}function k(){var j=[].slice.call(arguments),b,f,d,g,l,k,c,h,m,i,n;if(j.length>=4){if(b=j[1],f="",b.target!==void 0&&(f=b.target+""),d={beglbl:"[@",endlbl:"@]"},g=!1,typeof b.parseoptions=="string"&&b.parseoptions!==""&&(b.parseoptions=JSON.parse(b.parseoptions)),typeof b.parseoptions=="object"){g=!0;for(let a of Object.keys(b.parseoptions))d[a]=b.parseoptions[a]}if(l=b.scriptlabel+"",k=b.replacelabel+"",c=j[2],h=e(`${l}||`,`||${l}`,c),m=h[1].join(""),c=h[0].trim(),i=[],n=[],c!="")if(c.indexOf(`${k}||`)>-1){h=e(`${k}||`,`||${k}`,c),c=h[0].trim();for(let a of h[1])a.indexOf("||")>-1&&(i[i.length]=[a.substring(0,a.indexOf("||")),a.substring(a.indexOf("||")+"||".length,a.length)])}if(f!==""&&c!==""&&(f.startsWith("#")?g&&typeof parseActivePassive=="function"?parseActivePassive({owner:a(f),beglbl:d.beglbl,endlbl:d.endlbl,print:function(b){a(f).html(b)}},c):a(f).html(c):a(f).each(function(e){var b=this;g&&typeof parseActivePassive=="function"?parseActivePassive({owner:a(b),beglbl:d.beglbl,endlbl:d.endlbl,print:function(c){a(b).html(c)}},targetSec[1]):a(this).html(c)})),i.length>0)for(let b of i)a(b[0]).length>0&&(b[0].startsWith("#")?g&&typeof parseActivePassive=="function"?parseActivePassive({owner:a(b[0]),beglbl:d.beglbl,endlbl:d.endlbl,print:function(c){a(b[0]).html(c)}},b[1]):a(b[0]).html(b[1]):a(b[0]).each(function(){var c=this;g&&typeof parseActivePassive=="function"?parseActivePassive({owner:a(c),beglbl:d.beglbl,endlbl:d.endlbl,print:function(b){a(c).html(b)}},b[1]):a(c).html(b[1])}));if(m!="")try{eval(m)}catch(a){throw a}}}function h(){var a=[].slice.call(arguments)}function i(b,c,d){var a=document.createElement("a");document.body.appendChild(a),a.style="display: none",blob=new Blob([b],{type:d}),url=window.URL.createObjectURL(blob),a.href=url,a.download=c,a.click(),window.URL.revokeObjectURL(url)}function e(a,b,c){this.parsedPassiveString="",this.parsedActiveString="",this.parsedActiveArr=[],this.passiveStringIndex=0,this.passiveStringArr=[...c],this.lblsi=0,this.lblei=0,this.pc='';for(let c of passiveStringArr)this.lblei==0&&this.lblsi<a.length?(this.lblsi>0&&a[this.lbls-1]==pc&&a[this.lblsi]!=c&&(this.parsedPassiveString+=a.substring(0,this.lblsi),this.lblsi=0),a[this.lblsi]==c?(this.lblsi++,this.lblsi==a.length):(this.lblsi>0&&(this.parsedPassiveString+=a.substring(0,this.lblsi),this.lblsi=0),this.parsedPassiveString+=c)):this.lblsi==a.length&&this.lblei<b.length&&(b[this.lblei]==c?(this.lblei++,this.lblei==b.length&&(this.parsedActiveArr[this.parsedActiveArr.length]=this.parsedActiveString+"",this.parsedActiveString="",this.lblei=0,this.lblsi=0)):(this.lblei>0&&(this.parsedActiveString+=b.substring(0,this.lblei),this.lblei=0),this.parsedActiveString+=c+"")),this.pc=c;return[this.parsedPassiveString,this.parsedActiveArr]}function j(i){var d=i?i.split('?')[1]:"",a={},h,f,g,b,c,e,j;if(d){d=d.split('#')[0],h=d.split('&');for(f=0;f<h.length;f++)g=h[f].split('='),b=decodeURIComponent(g[0]),c=typeof g[1]=='undefined'?"":decodeURIComponent(g[1]),b.match(/\[(\d+)?\]$/)?(e=b.replace(/\[(\d+)?\]/,''),a[e]||(a[e]=[]),b.match(/\[\d+\]$/)?(j=/\[(\d+)\]/.exec(b)[1],a[e][j]=c):a[e].push(c)):a[b]?a[b]&&typeof a[b]=='string'?(a[b]=[a[b]],a[b].push(c)):a[b].push(c):a[b]=c}return a}if(f={postElem:g,postNode:b,defaultResponseCall:b,defaultResponseErrorCall:h,safeData:i,parseActiveString:e,getAllUrlParams:j},typeof c=='function')return f;Object.keys(f).forEach(function(a){window[a]=f[a]}.bind(this))})