//parsing
!function(name,context,definition){typeof exports=='object'?module.exports=definition(require):typeof define=='function'&&define.amd?define(definition):context[name]=definition()}.call(this,'parseActivePassive',this,function(require){function parseActivePassive(prsng,unparsedcontent){var trimcode,passive,unsprsdln,psvprsdi,atvprsdi,canprintout,owner,print,altFlushPassive,altFlushPassiveResult,altFlushActive,altFlushActiveResult,altEvalActive,stillvalid,foundCode,hasCode,tmppassive,tmpcode,code,prvc,begi,endi,content;typeof prsng.startParsing=="function"&&prsng.startParsing(),trimcode=!(typeof prsng.trimactive=="boolean")||prsng.trimactive,passive="",unsprsdln=-1,psvprsdi=-1,atvprsdi=-1,canprintout=typeof prsng.print=="function",owner=typeof prsng.owner=="object"?prsng.owner:null,print=function(prntthis){canprintout&&typeof prntthis=="string"&&prntthis!==""&&(passive+=prntthis)},altFlushPassive=typeof prsng.flushpassive=="function"?prsng.flushpassive:null,altFlushPassiveResult=null,altFlushActive=typeof prsng.flushactive=="function"?prsng.flushactive:null,altFlushActiveResult=null,altEvalActive=typeof prsng.evalactive=="function"?prsng.evalactive:null,stillvalid=!0;function iterateString(prsgn,stringtoiterate,functoprsr){var i,tmpstringtoiterate;if(stillvalid&&stringtoiterate!=null)if(typeof stringtoiterate=="string"&&typeof functoprsr=="function"){for(i=0;i<stringtoiterate.length;i++)if(unsprsdln++,functoprsr(prsgn,stringtoiterate[i]),!stillvalid)break}else if(typeof stringtoiterate=="function")for(tmpstringtoiterate=null;stillvalid;)if((tmpstringtoiterate=stringtoiterate())!=null&&typeof tmpstringtoiterate=="string"){for(i=0;i<tmpstringtoiterate.length;i++)if(unsprsdln++,functoprsr(prsgn,tmpstringtoiterate[i]),!stillvalid)break}else break}foundCode=!1,hasCode=!1,tmppassive="",tmpcode="",code="",prvc="",begi=0,endi=0,content=[],typeof prsng.beglbl!="string"&&(prsng.beglbl="[@"),typeof prsng.endlbl!="string"&&(prsng.endlbl="@]");function flushPassive(prsng){if(tmppassive!=""){if(altFlushPassive!=null&&typeof altFlushPassive=="function")(altFlushPassiveResult=altFlushPassive(tmppassive,psvprsdi))!=null&&typeof altFlushPassiveResult=="boolean"&&altFlushPassiveResult===!1&&(stillvalid=!1);else if(foundCode)if(tmppassive.length>1&&tmppassive.startsWith("|'|")&&tmppassive.endsWith("|'|"))tmpcode+="print("+tmppassive+");";else{var cntntl=content.push(tmppassive+"");tmpcode+="print(content["+(cntntl-1)+"]);"}else print(tmppassive);psvprsdi>-1&&(psvprsdi=-1),tmppassive=""}}function parsePsvChar(prsng,chr){flushCode(prsng),tmppassive+=chr}function parseCodeChar(prsng,chr){hasCode||(trimcode&&(chr+"").trim()!==""?hasCode=!0:hasCode=!0),hasCode&&(flushPassive(prsng),foundCode||(foundCode=!0),tmpcode+=chr)}function flushCode(prsgn){tmpcode!=""&&(altFlushActive!=null&&typeof altFlushActive=="function"?(altFlushActiveResult=altFlushActive(tmpcode,atvprsdi))!=null&&typeof altFlushActiveResult=="boolean"&&altFlushActiveResult===!1&&(stillvalid=!1):code+=tmpcode,atvprsdi>-1&&(atvprsdi=-1),tmpcode="")}function parsechr(prsng,chr){var bi;endi==0&&begi<prsng.beglbl.length?(psvprsdi==-1&&(psvprsdi=unsprsdln),begi>0&&prsng.beglbl[begi-1]==prvc&&prsng.beglbl[begi]!==chr&&(bi=begi,begi=0,iterateString(prsng,prsng.beglbl.substring(0,bi),parsePsvChar)),prsng.beglbl[begi]===chr?(begi++,begi===prsng.beglbl.length?(prvc="",prvc=""):prvc=chr):(begi>0&&(bi=begi,begi=0,iterateString(prsng,prsng.beglbl.substring(0,bi),parsePsvChar)),parsePsvChar(prsng,prvc=chr))):begi==prsng.beglbl.length&&endi<prsng.endlbl.length&&(atvprsdi==-1&&(atvprsdi=unsprsdln),prsng.endlbl[endi]===chr?(endi++,endi===prsng.endlbl.length&&(begi=0,endi=0,prvc="")):(endi>0&&(bi=endi,endi=0,iterateString(prsng,prsng.endlbl.substring(0,bi),parseCodeChar)),parseCodeChar(prsng,chr)))}iterateString(prsng,unparsedcontent,parsechr),flushPassive(prsng),flushCode(prsng),foundCode&&code!=""&&(altEvalActive!=null&&typeof altEvalActive=="function"?altEvalActive(code):eval(code)),passive!==""&&canprintout&&prsng.print(passive),typeof prsng.endParsing=="function"&&prsng.endParsing()}return parseActivePassive})
//webactions
!function(b,c,a){typeof exports=='object'?module.exports=a(require):typeof define=='function'&&define.amd?define(a):c[b]=a()}.call(this,'webaction',this,function(c){var a=typeof c=='function'?c('./jquery'):window.$,d="",e;function i(){var c=[].slice.call(arguments),e,d;if(c==void 0)return;if(Array.isArray(c)){if(c.length==0)return;if(c.length==1)c=c[0];else{for(e in c)i(c[e]);return}}d={},a(c).each(function(){a.each(this.attributes,function(){this.specified&&(this.name=="url_ref"||this.name=="form_ref"||this.name=="enable_progress_elem"||this.name=="progress_elem"||this.name=="target"||this.name=="scriptlabel"||this.name=="replacelabel"||this.name==="parseoptions"||this.name==="mockcontent"?d[this.name]=this.value:this.name=="json_ref"&&this.value!=void 0&&this.value!=""&&(d[this.name]=JSON.parse(this.value)))})}),b(d)}function b(){var c=[].slice.call(arguments),q,x,r,l,m,i,n,f,o,s,u,z,e,k,y,v,w,p,t,A;if(c==void 0)return;if(Array.isArray(c)){if(c.length==0)return;if(c.length==1){if(Array.isArray(c[0])){for(q in c[0])b(c[0][q]);return}if(typeof c[0]=='function'){if(x=c[0](),x===void 0)return;b(x);return}c=c[0]}else{for(q in c)b(c[q]);return}}if(c.url_ref==void 0||c.url_ref=="")return;r=!1,l=!1,typeof c.progress_elem=="string"&&c.progress_elem!==""&&(l=!0),m="",i=!1,n="",f="",o="",s="",typeof c.mockcontent=="string"&&c.mockcontent!==""&&(s=(c.mockcontent+"").trim()),typeof c.form_ref=="string"&&c.form_ref!==""&&(r=!0,o=(c.form_ref+"").trim()),u=null,c.json_ref!=void 0&&(i=!0,u=c.json_ref),z="",l&&a(m).show(),typeof c.error_elem=="string"&&c.error_elem!==""?n=(c.error_elem+"").trim():n="",typeof c.url_ref=="string"&&c.url_ref!==""?f=(c.url_ref+"").trim():f=(d+"").trim(),r&&c.form_ref!=void 0&&(o=(c.form_ref+"").trim()),c.target!=void 0&&(z=(c.target+"").trim()),e=i?u:new FormData,f!==""&&(k=h(f),f.indexOf("?")>-1?(f=f.slice(0,f.indexOf("?")),d=f+""):d=f+"",k!=void 0&&Object.keys(k).forEach(function(a){Array.isArray(k[a])?k[a].forEach(function(b){i?(e["reqst-params"][fname]==void 0&&(e["reqst-params"][fname]=[]),e["reqst-params"][a].push(b)):e.append(a,b)}):i?(e["reqst-params"][fname]==void 0&&(e["reqst-params"][fname]=[]),e["reqst-params"][a].push(k[a])):e.append(a,k[a])})),y=o.trim()==""?[]:o.split("|"),r&&y.forEach(function(b,c,d){a(b).length&&(a(b).is("form")||a(b).find("select[name],input[name],textarea[name]")!=void 0&&a(b).find("select[name],input[name],textarea[name]").each(function(){var b=a(this),g,d,c,f;b.attr("name")!=""&&(g=!0,d=b.attr("type")!==void 0?b.attr("type"):"text",(d==="checkbox"||d==="radio")&&(g=!!b.prop("checked")),g&&(c=b.attr("name"),f=b.val(),i&&e["reqst-params"]==void 0&&(e["reqst-params"]={}),d!==void 0&&d!=="button"&&d!=="submit"&&d!=="image"?d==="file"?i||e.append(b.attr("name"),b[0].files[0]):i?(e["reqst-params"][c]==void 0&&(e["reqst-params"][c]=[]),e["reqst-params"][c].push(f)):e.append(c,f):i?(e["reqst-params"][c]==void 0&&(e["reqst-params"][c]=[]),e["reqst-params"][c].push(f)):e.append(c,f)))}))}),v="replace-content",typeof c.replacelabel=="string"&&(c.replacelabel!="").trim()!==""?v=(c.replacelabel!="").trim():c.replacelabel=v,w="script",typeof c.scriptlabel=="string"&&c.scriptlabel!=""!==""?w=c.scriptlabel!="":c.scriptlabel=w,p=j,t=g,A=new Promise(function(d,b){if(s==="")a.ajax({xhr:function(){var b=a.ajaxSettings.xhr();return b.upload.onprogress=function(b){l&&a(m).html(Math.floor(b.loaded/b.total*100)+'%')},b.withCredentials=!1,b},contentType:!!i&&"application/json",processData:!1,type:'POST',data:i?JSON.stringify(e):e,url:f,success:function(e,f,g){if(l&&a(m).hide(),p!=null)try{p("ajax",c,e,f,g),d()}catch(a){b(a)}},error:function(e,d,f){l&&a(m).hide(),t!==void 0?t("ajax",c,d,e):n!==""&&a(n).html("Error loading request: "+d),b(Error("Error loading request: "+d))}});else if(l&&a(m).hide(),p!=null)try{p("mockajax",c,s),d()}catch(a){b(a)}}),A.then(function(){c.resolved!=void 0&&typeof c.resolved=='function'&&c.resolved(c),c.options!=void 0&&b(c.options)},function(a){c.rejected!=void 0&&typeof c.rejected=='function'&&c.rejected(c,a)})}function j(){var j=[].slice.call(arguments),b,e,d,g,l,k,c,h,m,i,n;if(j.length>=3){if(b=j[1],e="",b.target!==void 0&&(e=b.target+""),d={beglbl:"[@",endlbl:"@]"},g=!1,typeof b.parseoptions=="string"&&b.parseoptions!==""&&(b.parseoptions=JSON.parse(b.parseoptions)),typeof b.parseoptions=="object"){g=!0;for(let a of Object.keys(b.parseoptions))d[a]=b.parseoptions[a]}if(l=b.scriptlabel+"",k=b.replacelabel+"",c=j[2],h=f(`${l}||`,`||${l}`,c),m=h[1].join(""),c=h[0].trim(),i=[],n=[],c!="")if(c.indexOf(`${k}||`)>-1){h=f(`${k}||`,`||${k}`,c),c=h[0].trim();for(let a of h[1])a.indexOf("||")>-1&&(i[i.length]=[a.substring(0,a.indexOf("||")),a.substring(a.indexOf("||")+"||".length,a.length)])}if(e!==""&&c!==""&&(e.startsWith("#")?g&&typeof parseActivePassive=="function"?parseActivePassive({owner:a(e),beglbl:d.beglbl,endlbl:d.endlbl,print:function(b){a(e).html(b)}},c):a(e).html(c):a(e).each(function(e){var b=this;g&&typeof parseActivePassive=="function"?parseActivePassive({owner:a(b),beglbl:d.beglbl,endlbl:d.endlbl,print:function(c){a(b).html(c)}},targetSec[1]):a(this).html(c)})),i.length>0)for(let b of i)a(b[0]).length>0&&(b[0].startsWith("#")?g&&typeof parseActivePassive=="function"?parseActivePassive({owner:a(b[0]),beglbl:d.beglbl,endlbl:d.endlbl,print:function(c){a(b[0]).html(c)}},b[1]):a(b[0]).html(b[1]):a(b[0]).each(function(){var c=this;g&&typeof parseActivePassive=="function"?parseActivePassive({owner:a(c),beglbl:d.beglbl,endlbl:d.endlbl,print:function(b){a(c).html(b)}},b[1]):a(c).html(b[1])}));if(m!="")try{eval(m)}catch(a){throw a}}}function g(){var a=[].slice.call(arguments)}function f(a,b,c){this.parsedPassiveString="",this.parsedActiveString="",this.parsedActiveArr=[],this.passiveStringIndex=0,this.passiveStringArr=[...c],this.lblsi=0,this.lblei=0,this.pc='';for(let c of passiveStringArr)this.lblei==0&&this.lblsi<a.length?(this.lblsi>0&&a[this.lbls-1]==pc&&a[this.lblsi]!=c&&(this.parsedPassiveString+=a.substring(0,this.lblsi),this.lblsi=0),a[this.lblsi]==c?(this.lblsi++,this.lblsi==a.length):(this.lblsi>0&&(this.parsedPassiveString+=a.substring(0,this.lblsi),this.lblsi=0),this.parsedPassiveString+=c)):this.lblsi==a.length&&this.lblei<b.length&&(b[this.lblei]==c?(this.lblei++,this.lblei==b.length&&(this.parsedActiveArr[this.parsedActiveArr.length]=this.parsedActiveString+"",this.parsedActiveString="",this.lblei=0,this.lblsi=0)):(this.lblei>0&&(this.parsedActiveString+=b.substring(0,this.lblei),this.lblei=0),this.parsedActiveString+=c+"")),this.pc=c;return[this.parsedPassiveString,this.parsedActiveArr]}function h(i){var d=i?i.split('?')[1]:"",a={},h,f,g,b,c,e,j;if(d){d=d.split('#')[0],h=d.split('&');for(f=0;f<h.length;f++)g=h[f].split('='),b=decodeURIComponent(g[0]),c=typeof g[1]=='undefined'?"":decodeURIComponent(g[1]),b.match(/\[(\d+)?\]$/)?(e=b.replace(/\[(\d+)?\]/,''),a[e]||(a[e]=[]),b.match(/\[\d+\]$/)?(j=/\[(\d+)\]/.exec(b)[1],a[e][j]=c):a[e].push(c)):a[b]?a[b]&&typeof a[b]=='string'?(a[b]=[a[b]],a[b].push(c)):a[b].push(c):a[b]=c}return a}if(e={postElem:i,postNode:b,defaultResponseCall:b,defaultResponseErrorCall:g,parseActiveString:f,getAllUrlParams:h},typeof c=='function')return e;Object.keys(e).forEach(function(a){window[a]=e[a]}.bind(this))})