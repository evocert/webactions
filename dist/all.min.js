//parsing
function parseActivePassive(prsng,unparsedcontent){var passive,canprintout,owner,print,foundCode,hasCode,tmppassive,tmpcode,code,prvc,begi,endi,content;typeof prsng.startParsing=="function"&&prsng.startParsing(),passive="",canprintout=typeof prsng.print=="function",owner=typeof prsng.owner=="object"?prsng.owner:null,print=function(prntthis){canprintout&&typeof prntthis=="string"&&prntthis!==""&&(passive+=prntthis)};function iterateString(prsgn,stringtoiterate,functoprsr){if(typeof stringtoiterate=="string"&&typeof functoprsr=="function")for(let cdr of stringtoiterate)functoprsr(prsgn,cdr)}foundCode=!1,hasCode=!1,tmppassive="",tmpcode="",code="",prvc="",begi=0,endi=0,content=[],typeof prsng.beglbl!="string"&&(prsng.beglbl="[@"),typeof prsng.endlbl!="string"&&(prsng.endlbl="@]");function flushPassive(prsng){if(tmppassive!=""){if(foundCode)if(tmppassive.length>1&&tmppassive.startsWith("`")&&tmppassive.endsWith("`"))tmpcode+="print("+tmppassive+");";else{var cntntl=content.push(tmppassive+"");tmpcode+="print(content["+(cntntl-1)+"]);"}else print(tmppassive);tmppassive=""}}function parsePsvChar(prsng,chr){flushCode(),tmppassive+=chr}function parseCodeChar(prsng,chr){hasCode||(chr+"").trim()!==""&&(hasCode=!0),hasCode&&(flushPassive(prsng),foundCode||(foundCode=!0),tmpcode+=chr)}function flushCode(){tmpcode!=""&&(code+=tmpcode,tmpcode="")}function parsechr(prsng,chr){var bi;endi==0&&begi<prsng.beglbl.length?(begi>0&&prsng.beglbl[begi-1]==prvc&&prsng.beglbl[begi]!==chr&&(bi=begi,begi=0,iterateString(prsng,prsng.beglbl.substring(0,bi),parsePsvChar)),prsng.beglbl[begi]===chr?(begi++,begi===prsng.beglbl.length?(prvc="",prvc=""):prvc=chr):(begi>0&&(bi=begi,begi=0,iterateString(prsng,prsng.beglbl.substring(0,bi),parsePsvChar)),parsePsvChar(prsng,prvc=chr))):begi==prsng.beglbl.length&&endi<prsng.endlbl.length&&(prsng.endlbl[endi]===chr?(endi++,endi===prsng.endlbl.length&&(begi=0,endi=0,prvc="")):(endi>0&&(bi=endi,endi=0,iterateString(prsng,prsng.endlbl.substring(0,bi),parseCodeChar)),parseCodeChar(prsng,chr)))}iterateString(prsng,unparsedcontent,parsechr),flushPassive(prsng),flushCode(),foundCode&&code!=""&&eval(code),passive!==""&&canprintout&&prsng.print(passive),typeof prsng.endParsing=="function"&&prsng.endParsing()}
//webactions
var lasturlref="";function postElem(){var a=[].slice.call(arguments),c,b;if(a==void 0)return;if(Array.isArray(a)){if(a.length==0)return;if(a.length==1)a=a[0];else{for(c in a)postElem(a[c]);return}}b={},$(a).each(function(){$.each(this.attributes,function(){this.specified&&(this.name=="url_ref"||this.name=="form_ref"||this.name=="enable_progress_elem"||this.name=="progress_elem"||this.name=="target"||this.name=="command"||this.name=="scriptlabel"||this.name=="replacelabel"||this.name==="parseoptions"?b[this.name]=this.value:this.name=="json_ref"&&this.value!=void 0&&this.value!=""&&(b[this.name]=JSON.parse(this.value)))})}),postNode(b)}function postNode(){var a=[].slice.call(arguments),l,n,j,g,c,e,h,d,i,k,m,q,b,f,r,o,p,s;if(a==void 0)return;if(Array.isArray(a)){if(a.length==0)return;if(a.length==1){if(Array.isArray(a[0])){for(l in a[0])postNode(a[0][l]);return}if(typeof a[0]=='function'){if(n=a[0](),n===void 0)return;postNode(n);return}a=a[0]}else{for(l in a)postNode(a[l]);return}}if(a.url_ref==void 0||a.url_ref=="")return;j=!1,g=!1,a.enable_progress_elem!=void 0&&a.enable_progress_elem!=""&&(g=a.enable_progress_elem=="true"),c="",e=!1,h="",d="",i="",k="",a.command!=void 0&&a.command!=""&&(k=a.command),a.form_ref!=void 0&&a.form_ref!=""&&(j=!0,i=a.form_ref),m=null,a.json_ref!=void 0&&(e=!0,m=a.json_ref),q="",g&&(a.progress_elem!=void 0?c=a.progress_elem+"":($.blockUI({message:'<span style="font-size:1.2em" id="showprogress">Please wait ...</span>',css:{border:'none',padding:'15px',backgroundColor:'#000','-webkit-border-radius':'10px','-moz-border-radius':'10px',opacity:.7,color:'#fff'}}),c="#showprogress"),c!=void 0&&c!="#showprogress"&&$(c).show()),a.error_elem!=void 0?h=(a.error_elem+"").trim():h="",a.url_ref!=void 0?d=(a.url_ref+"").trim():d=(lasturlref+"").trim(),j&&a.form_ref!=void 0&&(i=(a.form_ref+"").trim()),a.target!=void 0&&(q=(a.target+"").trim()),b=e?m:new FormData,d!==""&&(f=getAllUrlParams(d),d.indexOf("?")>-1?(d=d.slice(0,d.indexOf("?")),lasturlref=d+""):lasturlref=d+"",f!=void 0&&Object.keys(f).forEach(function(a){Array.isArray(f[a])?f[a].forEach(function(c){e?(b["reqst-params"][fname]==void 0&&(b["reqst-params"][fname]=[]),b["reqst-params"][a].push(c)):b.append(a,c)}):e?(b["reqst-params"][fname]==void 0&&(b["reqst-params"][fname]=[]),b["reqst-params"][a].push(f[a])):b.append(a,f[a])})),r=i.trim()==""?[]:i.split("|"),j&&r.forEach(function(a,c,d){$(a).length&&($(a).is("form")||$(a).find("select[name],input[name],textarea[name]")!=void 0&&$(a).find("select[name],input[name],textarea[name]").each(function(){var a=$(this),g,d,c,f;a.attr("name")!=""&&(g=!0,d=a.attr("type")!==void 0?a.attr("type"):"text",(d==="checkbox"||d==="radio")&&(g=!!a.prop("checked")),g&&(c=a.attr("name"),f=a.val(),e&&b["reqst-params"]==void 0&&(b["reqst-params"]={}),d!==void 0&&d!=="button"&&d!=="submit"&&d!=="image"?d==="file"?e||b.append(a.attr("name"),a[0].files[0]):e?(b["reqst-params"][c]==void 0&&(b["reqst-params"][c]=[]),b["reqst-params"][c].push(f)):b.append(c,f):e?(b["reqst-params"][c]==void 0&&(b["reqst-params"][c]=[]),b["reqst-params"][c].push(f)):b.append(c,f)))}))}),k!=""&&(hasJSon||b.append("command",k)),o=defaultResponseCall,p=defaultResponseErrorCall,s=new Promise(function(i,f){$.ajax({xhr:function(){var a=$.ajaxSettings.xhr();return a.upload.onprogress=function(a){g&&c!=void 0&&c!=""&&$(c).html(Math.floor(a.loaded/a.total*100)+'%')},a.withCredentials=!1,a},contentType:!!e&&"application/json",processData:!1,type:'POST',data:e?JSON.stringify(b):b,url:d,success:function(l,k,e){var h,j,b,d;if(e.getResponseHeader("Content-Disposition")==null){if(g&&c!=void 0&&(c=="#showprogress"?$.unblockUI():$(c).hide()),h="replace-content",a.replacelabel!=void 0&&(a.replacelabel!="").trim()!==""&&(h=(a.replacelabel!="").trim()),j="script",a.scriptlabel!=void 0&&a.scriptlabel!=""!==""&&(j=a.scriptlabel!=""),o!=null){a.replacelabel==void 0&&(a.replacelabel=h),a.scriptlabel==void 0&&(a.scriptlabel=j);try{o("ajax",a,l,k,e),i()}catch(a){f(a)}}}else b=(""+e.getResponseHeader("Content-Disposition")).trim(),b.indexOf("attachment;")>-1&&(b=b.substr(b.indexOf("attachment;")+"attachment;".length).trim()),d=(""+e.getResponseHeader("Content-Type")).trim(),d.indexOf(";")>-1&&(d=d.substr(0,d.indexOf(";")).trim()),b.indexOf("filename=")>-1&&(b=b.substr(b.indexOf("filename=")+"filename=".length).trim(),b=b.replace(/"/i,""),b=b.replace(/"/i,"")),safeData(responseText,b,d)},error:function(d,b,e){g&&c!=void 0&&(c=="#showprogress"?$.unblockUI():$(c).hide()),p!==void 0?p("ajax",a,b,d):h!=void 0&&h!=""&&$(h).html("Error loading request: "+b),f(Error("Error loading request: "+b))}})}),s.then(function(){a.resolved!=void 0&&typeof a.resolved=='function'&&a.resolved(a),a.options!=void 0&&postNode(a.options)},function(b){a.rejected!=void 0&&typeof a.rejected=='function'&&a.rejected(a,b)})}function defaultResponseCall(){var h=[].slice.call(arguments),c,d,b,e,j,i,a,f,k,g,l;if(h.length>=4){if(c=h[1],d="",c.target!==void 0&&(d=c.target+""),b={beglbl:"[@",endlbl:"@]"},e=!1,typeof c.parseoptions=="object"){e=!0;for(let a of Object.keys(c.parseoptions))b[a]=c.parseoptions[a]}if(j=c.scriptlabel+"",i=c.replacelabel+"",a=h[2],f=parseActiveString(`${j}||`,`||${j}`,a),k=f[1].join(""),a=f[0].trim(),g=[],l=[],a!="")if(a.indexOf(`${i}||`)>-1){f=parseActiveString(`${i}||`,`||${i}`,a),a=f[0].trim();for(let a of f[1])a.indexOf("||")>-1&&(g[g.length]=[a.substring(0,a.indexOf("||")),a.substring(a.indexOf("||")+"||".length,a.length)])}if(d!==""&&a!==""&&(d.startsWith("#")?e&&typeof parseActivePassive=="function"?parseActivePassive({owner:$(tthis),beglbl:b.beglbl,endlbl:b.endlbl,print:function(a){$(d).html(a)}},a):$(d).html(a):$(d).each(function(d){var c=this;e&&typeof parseActivePassive=="function"?parseActivePassive({owner:$(c),beglbl:b.beglbl,endlbl:b.endlbl,print:function(a){$(c).html(a)}},targetSec[1]):$(this).html(a)})),g.length>0)for(let a of g)$(a[0]).length>0&&(a[0].startsWith("#")?e&&typeof parseActivePassive=="function"?parseActivePassive({owner:$(a[0]),beglbl:b.beglbl,endlbl:b.endlbl,print:function(b){$(a[0]).html(b)}},a[1]):$(a[0]).html(a[1]):$(a[0]).each(function(){var c=this;e&&typeof parseActivePassive=="function"?parseActivePassive({owner:$(c),beglbl:b.beglbl,endlbl:b.endlbl,print:function(a){$(c).html(a)}},a[1]):$(c).html(a[1])}));if(k!="")try{eval(k)}catch(a){throw a}}}function defaultResponseErrorCall(){var a=[].slice.call(arguments)}function safeData(b,c,d){var a=document.createElement("a");document.body.appendChild(a),a.style="display: none",blob=new Blob([b],{type:d}),url=window.URL.createObjectURL(blob),a.href=url,a.download=c,a.click(),window.URL.revokeObjectURL(url)}function parseActiveString(a,b,c){this.parsedPassiveString="",this.parsedActiveString="",this.parsedActiveArr=[],this.passiveStringIndex=0,this.passiveStringArr=[...c],this.lblsi=0,this.lblei=0,this.pc='';for(let c of passiveStringArr)this.lblei==0&&this.lblsi<a.length?(this.lblsi>0&&a[this.lbls-1]==pc&&a[this.lblsi]!=c&&(this.parsedPassiveString+=a.substring(0,this.lblsi),this.lblsi=0),a[this.lblsi]==c?(this.lblsi++,this.lblsi==a.length):(this.lblsi>0&&(this.parsedPassiveString+=a.substring(0,this.lblsi),this.lblsi=0),this.parsedPassiveString+=c)):this.lblsi==a.length&&this.lblei<b.length&&(b[this.lblei]==c?(this.lblei++,this.lblei==b.length&&(this.parsedActiveArr[this.parsedActiveArr.length]=this.parsedActiveString+"",this.parsedActiveString="",this.lblei=0,this.lblsi=0)):(this.lblei>0&&(this.parsedActiveString+=b.substring(0,this.lblei),this.lblei=0),this.parsedActiveString+=c+"")),this.pc=c;return[this.parsedPassiveString,this.parsedActiveArr]}function getAllUrlParams(i){var d=i?i.split('?')[1]:"",a={},h,f,g,b,c,e,j;if(d){d=d.split('#')[0],h=d.split('&');for(f=0;f<h.length;f++)g=h[f].split('='),b=decodeURIComponent(g[0]),c=typeof g[1]=='undefined'?"":decodeURIComponent(g[1]),b.match(/\[(\d+)?\]$/)?(e=b.replace(/\[(\d+)?\]/,''),a[e]||(a[e]=[]),b.match(/\[\d+\]$/)?(j=/\[(\d+)\]/.exec(b)[1],a[e][j]=c):a[e].push(c)):a[b]?a[b]&&typeof a[b]=='string'?(a[b]=[a[b]],a[b].push(c)):a[b].push(c):a[b]=c}return a}