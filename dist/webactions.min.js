function webactionRequestViaOptions(b,c,d,e,a){postForm({url_ref:b,form_ref:c,target:d,command:e,enable_progress_elem:a==void 0?"true":a})}var lasturlref="";function postElem(){var a=[].slice.call(arguments),c,b;if(a==void 0)return;if(Array.isArray(a)){if(a.length==0)return;if(a.length==1)a=a[0];else{for(c in a)postElem(a[c]);return}}b={},$(a).each(function(){$.each(this.attributes,function(){this.specified&&(this.name=="url_ref"||this.name=="form_ref"||this.name=="enable_progress_elem"||this.name=="progress_elem"||this.name=="target"||this.name=="command"||this.name=="scriptlabel"||this.name=="replacelabel"?b[this.name]=this.value:this.name=="json_ref"&&this.value!=void 0&&this.value!=""&&(b[this.name]=JSON.parse(this.value)))})}),postNode(b)}function postNode(){var a=[].slice.call(arguments),l,n,j,g,c,e,h,d,i,k,m,q,b,f,r,o,p,s;if(a==void 0)return;if(Array.isArray(a)){if(a.length==0)return;if(a.length==1){if(Array.isArray(a[0])){for(l in a[0])postNode(a[0][l]);return}if(typeof a[0]=='function'){if(n=a[0](),n===void 0)return;postNode(n);return}a=a[0]}else{for(l in a)postNode(a[l]);return}}if(a.url_ref==void 0||a.url_ref=="")return;j=!1,g=!1,a.enable_progress_elem!=void 0&&a.enable_progress_elem!=""&&(g=a.enable_progress_elem=="true"),c="",e=!1,h="",d="",i="",k="",a.command!=void 0&&a.command!=""&&(k=a.command),a.form_ref!=void 0&&a.form_ref!=""&&(j=!0,i=a.form_ref),m=null,a.json_ref!=void 0&&(e=!0,m=a.json_ref),q="",g&&(a.progress_elem!=void 0?c=a.progress_elem+"":($.blockUI({message:'<span style="font-size:1.2em" id="showprogress">Please wait ...</span>',css:{border:'none',padding:'15px',backgroundColor:'#000','-webkit-border-radius':'10px','-moz-border-radius':'10px',opacity:.7,color:'#fff'}}),c="#showprogress"),c!=void 0&&c!="#showprogress"&&$(c).show()),a.error_elem!=void 0?h=(a.error_elem+"").trim():h="",a.url_ref!=void 0?d=(a.url_ref+"").trim():d=(lasturlref+"").trim(),j&&a.form_ref!=void 0&&(i=(a.form_ref+"").trim()),a.target!=void 0&&(q=(a.target+"").trim()),b=e?m:new FormData,d!==""&&(f=getAllUrlParams(d),d.indexOf("?")>-1?(d=d.slice(0,d.indexOf("?")),lasturlref=d+""):lasturlref=d+"",f!=void 0&&Object.keys(f).forEach(function(a){Array.isArray(f[a])?f[a].forEach(function(c){e?(b["reqst-params"][fname]==void 0&&(b["reqst-params"][fname]=[]),b["reqst-params"][a].push(c)):b.append(a,c)}):e?(b["reqst-params"][fname]==void 0&&(b["reqst-params"][fname]=[]),b["reqst-params"][a].push(f[a])):b.append(a,f[a])})),r=i.trim()==""?[]:i.split("|"),j&&r.forEach(function(a,c,d){$(a).length&&($(a).is("form")||$(a).find("select[name],input[name],textarea[name]")!=void 0&&$(a).find("select[name],input[name],textarea[name]").each(function(){var a=$(this),g,d,c,f;a.attr("name")!=""&&(g=!0,d=a.attr("type")!==void 0?a.attr("type"):"text",(d==="checkbox"||d==="radio")&&(g=!!a.prop("checked")),g&&(c=a.attr("name"),f=a.val(),e&&b["reqst-params"]==void 0&&(b["reqst-params"]={}),d!==void 0&&d!=="button"&&d!=="submit"&&d!=="image"?d==="file"?e||b.append(a.attr("name"),a[0].files[0]):e?(b["reqst-params"][c]==void 0&&(b["reqst-params"][c]=[]),b["reqst-params"][c].push(f)):b.append(c,f):e?(b["reqst-params"][c]==void 0&&(b["reqst-params"][c]=[]),b["reqst-params"][c].push(f)):b.append(c,f)))}))}),k!=""&&(hasJSon||b.append("command",k)),o=defaultResponseCall,p=defaultResponseErrorCall,s=new Promise(function(i,f){$.ajax({xhr:function(){var a=$.ajaxSettings.xhr();return a.upload.onprogress=function(a){g&&c!=void 0&&c!=""&&$(c).html(Math.floor(a.loaded/a.total*100)+'%')},a.withCredentials=!1,a},contentType:!!e&&"application/json",processData:!1,type:'POST',data:e?JSON.stringify(b):b,url:d,success:function(l,k,e){var h,j,b,d;if(e.getResponseHeader("Content-Disposition")==null){if(g&&c!=void 0&&(c=="#showprogress"?$.unblockUI():$(c).hide()),h="replace-content",a.replacelabel!=void 0&&(a.replacelabel!="").trim()!==""&&(h=(a.replacelabel!="").trim()),j="script",a.scriptlabel!=void 0&&a.scriptlabel!=""!==""&&(j=a.scriptlabel!=""),o!=null){a.replacelabel==void 0&&(a.replacelabel=h),a.scriptlabel==void 0&&(a.scriptlabel=j);try{o("ajax",a,l,k,e),i()}catch(a){f(a)}}}else b=(""+e.getResponseHeader("Content-Disposition")).trim(),b.indexOf("attachment;")>-1&&(b=b.substr(b.indexOf("attachment;")+"attachment;".length).trim()),d=(""+e.getResponseHeader("Content-Type")).trim(),d.indexOf(";")>-1&&(d=d.substr(0,d.indexOf(";")).trim()),b.indexOf("filename=")>-1&&(b=b.substr(b.indexOf("filename=")+"filename=".length).trim(),b=b.replace(/"/i,""),b=b.replace(/"/i,"")),safeData(responseText,b,d)},error:function(d,b,e){g&&c!=void 0&&(c=="#showprogress"?$.unblockUI():$(c).hide()),p!==void 0?p("ajax",a,b,d):h!=void 0&&h!=""&&$(h).html("Error loading request: "+b),f(Error("Error loading request: "+b))}})}),s.then(function(){a.resolved!=void 0&&typeof a.resolved=='function'&&a.resolved(a),a.options!=void 0&&postNode(a.options)},function(b){a.rejected!=void 0&&typeof a.rejected=='function'&&a.rejected(a,b)})}function defaultResponseCall(){var g=[].slice.call(arguments),d,c,h,f,a,b,i,e,j;if(g.length>=4)if(d=g[1],c="",d.target!==void 0&&(c=d.target+""),h=d.scriptlabel+"",f=d.replacelabel+"",a=g[2],b=parseActiveString(`${h}||`,`||${h}`,a),i=b[1].join(""),a=b[0].trim(),e=[],j=[],a!=""&&a.indexOf(`${f}||`)>-1&&(b=parseActiveString(`${f}||`,`||${f}`,a),a=b[0],b[1].forEach(function(a,b){a.indexOf("||")>-1&&(e[e.length]=[a.substring(0,a.indexOf("||")),a.substring(a.indexOf("||")+"||".length,a.length)])})),c!==""&&a!==""&&(c.startsWith("#")?$(c).html(a):$(c).each(function(b){$(this).html(a)})),e.length>0&&e.forEach(function(a){alert(a[0]),$(a[0]).length>0&&(a[0].startsWith("#")?$(a[0]).html(a[1]):$(a[0]).each(function(b){$(this).html(a[1])}))}),i!="")try{eval(i)}catch(a){throw a}}function defaultResponseErrorCall(){var a=[].slice.call(arguments)}function safeData(b,c,d){var a=document.createElement("a");document.body.appendChild(a),a.style="display: none",blob=new Blob([b],{type:d}),url=window.URL.createObjectURL(blob),a.href=url,a.download=c,a.click(),window.URL.revokeObjectURL(url)}function parseActiveString(a,b,c){return this.parsedPassiveString="",this.parsedActiveString="",this.parsedActiveArr=[],this.passiveStringIndex=0,this.passiveStringArr=Array.from(c),this.passiveStringLen=this.passiveStringArr.length,this.labelStartIndex=0,this.labelEndIndex=0,this.labelStartArr=Array.from(a),this.labelEndArr=Array.from(b),this.pc='',this.passiveStringArr.forEach(function(c,d){this.labelEndIndex==0&&this.labelStartIndex<this.labelStartArr.length?(this.labelStartIndex>0&&this.labelStartArr[this.labelStartIndex-1]==pc&&this.labelStartArr[this.labelStartIndex]!=c&&(this.parsedPassiveString+=a.substring(0,this.labelStartIndex),this.labelStartIndex=0),this.labelStartArr[this.labelStartIndex]==c?(this.labelStartIndex++,this.labelStartIndex==this.labelStartArr.length):(this.labelStartindex>0&&(this.parsedPassiveString+=a.substring(0,this.labelStartIndex),this.labelStartIndex=0),this.parsedPassiveString+=c+"")):this.labelStartIndex==this.labelStartArr.length&&this.labelEndIndex<this.labelEndArr.length&&(this.labelEndArr[this.labelEndIndex]==c?(this.labelEndIndex++,this.labelEndIndex==this.labelEndArr.length&&(this.parsedActiveArr[this.parsedActiveArr.length]=this.parsedActiveString+"",this.parsedActiveString="",this.labelEndIndex=0,this.labelStartIndex=0)):(this.labelEndIndex>0&&(this.parsedActiveString+=b.substring(0,this.labelEndIndex),this.labelEndIndex=0),this.parsedActiveString+=c+"")),this.pc=c}),[this.parsedPassiveString,this.parsedActiveArr]}function getAllUrlParams(i){var d=i?i.split('?')[1]:"",a={},h,f,g,b,c,e,j;if(d){d=d.split('#')[0],h=d.split('&');for(f=0;f<h.length;f++)g=h[f].split('='),b=decodeURIComponent(g[0]),c=typeof g[1]=='undefined'?"":decodeURIComponent(g[1]),b.match(/\[(\d+)?\]$/)?(e=b.replace(/\[(\d+)?\]/,''),a[e]||(a[e]=[]),b.match(/\[\d+\]$/)?(j=/\[(\d+)\]/.exec(b)[1],a[e][j]=c):a[e].push(c)):a[b]?a[b]&&typeof a[b]=='string'?(a[b]=[a[b]],a[b].push(c)):a[b].push(c):a[b]=c}return a}